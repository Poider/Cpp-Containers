change using to typedef in map and stack

check in cpp reference header if the func is defined or not 

in vector you only wanna allocate occassionally so allocate works